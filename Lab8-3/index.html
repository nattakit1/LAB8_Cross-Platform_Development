<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 8.3 - Native APIs Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        .button:hover {
            background: white;
            color: #4CAF50;
            transform: translateY(-2px);
        }

        .result-box {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        .file-content {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
        }

        .loading {
            color: #FFD700;
        }

        .success {
            color: #90EE90;
        }

        .error {
            color: #FF6B6B;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è Native APIs Demo</h1>
            <p>‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Native APIs ‡∏Ç‡∏≠‡∏á Operating System</p>
        </div>

        <!-- File Operations Section -->
        <div class="section">
            <h3>üìÅ File Operations</h3>
            <p>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏î‡πâ‡∏ß‡∏¢ OS dialogs</p>

            <button class="button" id="btnOpenFile">üìÇ ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå</button>
            <button class="button" id="btnExportAgent">üìä Export Agent Data</button>
            <button class="button" id="btnSaveContent">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</button>

            <div class="result-box" id="fileResult">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö file operations</div>

            <div id="fileContent" class="file-content" style="display: none;"></div>
        </div>

        <!-- Notifications Section -->
        <div class="section">
            <h3>üîî Desktop Notifications</h3>
            <p>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö Operating System</p>

            <button class="button" id="btnBasicNotification">üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Notification</button>
            <button class="button" id="btnAgentLogin">üü¢ Agent Login</button>
            <button class="button" id="btnUrgentAlert">üö® Urgent Alert</button>

            <div class="result-box" id="notificationResult">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö notifications</div>
        </div>

        <!-- Text Editor Section -->
        <div class="section">
            <h3>üìù Text Editor</h3>
            <p>‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå</p>

            <textarea id="textEditor" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà... ‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ">
# Agent Report
‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${new Date().toLocaleDateString('th-TH')}

## ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Agents
- Agent ID: AG001
- ‡∏ä‡∏∑‡πà‡∏≠: Alice Johnson  
- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: Available
- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏≤‡∏¢: 15 calls
- ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: 245 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

## ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
- Total Calls: 35
- Avg Wait Time: 45 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- Available Agents: 1 ‡∏Ñ‡∏ô
- Busy Agents: 1 ‡∏Ñ‡∏ô
            </textarea>
        </div>
    </div>

    <script>
        console.log('üé® [RENDERER] Native APIs Demo ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡πâ‡∏ß');

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API
        if (window.nativeAPI) console.log('‚úÖ [RENDERER] Native APIs ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
        else console.error('‚ùå [RENDERER] Native APIs ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        function showResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString('th-TH');
            element.innerHTML = `[${timestamp}] ${message}`;
            element.className = `result-box ${type}`;
        }

        // ===== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å =====
        window.openFile = async function() {
            try {
                showResult('fileResult', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î file dialog...', 'loading');
                const result = await window.nativeAPI.openFile();
                if (result.success) {
                    showResult('fileResult',
                        `‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\nüìÑ ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå: ${result.fileName}\nüìÅ ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà: ${result.filePath}\nüìä ‡∏Ç‡∏ô‡∏≤‡∏î: ${result.size} characters`,
                        'success');
                    const contentDiv = document.getElementById('fileContent');
                    contentDiv.style.display = 'block';
                    contentDiv.innerText = result.content;
                    document.getElementById('textEditor').value = result.content;
                } else if (result.cancelled) {
                    showResult('fileResult', '‚èπÔ∏è ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå', 'info');
                } else throw new Error(result.error);
            } catch (error) {
                showResult('fileResult', `‚ùå Error: ${error.message}`, 'error');
            }
        };

        window.exportAgentData = async function() {
            try {
                showResult('fileResult', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô Agent...', 'loading');
                const agentData = [
                    'Agent ID,Name,Status,Extension,Department,Total Calls,Avg Call Time',
                    'AG001,Alice Johnson,Available,1001,Sales,15,245',
                    'AG002,Bob Smith,Busy,1002,Support,8,312',
                    'AG003,Carol Lee,Break,1003,Sales,12,198'
                ].join('\n');
                const fileName = `agent-report-${new Date().toISOString().split('T')[0]}.csv`;
                const result = await window.nativeAPI.saveFile(agentData, fileName);
                if (result.success) showResult('fileResult',
                    `üìä ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\nüìÑ ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå: ${result.fileName}\nüìÅ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${result.filePath}`, 'success');
                else if (result.cancelled) showResult('fileResult', '‚èπÔ∏è ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å', 'info');
            } catch (error) {
                showResult('fileResult', `‚ùå Error: ${error.message}`, 'error');
            }
        };

        window.saveCurrentContent = async function() {
            const content = document.getElementById('textEditor').value;
            if (!content.trim()) {
                showResult('fileResult', '‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å', 'error');
                return;
            }
            try {
                showResult('fileResult', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå...', 'loading');
                const fileName = `my-document-${Date.now()}.txt`;
                const result = await window.nativeAPI.saveFile(content, fileName);
                if (result.success) showResult('fileResult',
                    `üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\nüìÑ ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå: ${result.fileName}\nüìÅ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${result.filePath}`, 'success');
                else if (result.cancelled) showResult('fileResult', '‚èπÔ∏è ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å', 'info');
            } catch (error) {
                showResult('fileResult', `‚ùå Error: ${error.message}`, 'error');
            }
        };

        window.testBasicNotification = async function() {
            try {
                showResult('notificationResult', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á notification...', 'loading');
                const result = await window.nativeAPI.showNotification('Agent Wallboard', '‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ notification ‡∏ó‡∏î‡∏™‡∏≠‡∏ö üéâ');
                if (result.success) showResult('notificationResult', '‚úÖ ‡πÅ‡∏™‡∏î‡∏á notification ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                showResult('notificationResult', `‚ùå Error: ${error.message}`, 'error');
            }
        };

        window.testAgentLogin = async function() {
            try {
                showResult('notificationResult', '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Agent ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...', 'loading');
                const result = await window.nativeAPI.notifyAgentEvent('Alice Johnson', 'login', { time: new Date().toLocaleTimeString() });
                if (result.success) showResult('notificationResult', 'üü¢ Agent Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                showResult('notificationResult', `‚ùå Error: ${error.message}`, 'error');
            }
        };

        window.testUrgentAlert = async function() {
            try {
                showResult('notificationResult', '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πà‡∏ß‡∏ô...', 'loading');
                const result = await window.nativeAPI.showNotification('üö® ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πà‡∏ß‡∏ô!', '‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤!', true);
                if (result.success) showResult('notificationResult', 'üö® Urgent alert ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            } catch (error) {
                showResult('notificationResult', `‚ùå Error: ${error.message}`, 'error');
            }
        };

        // Event listener ‡∏õ‡∏∏‡πà‡∏°
        document.getElementById('btnOpenFile').addEventListener('click', openFile);
        document.getElementById('btnExportAgent').addEventListener('click', exportAgentData);
        document.getElementById('btnSaveContent').addEventListener('click', saveCurrentContent);
        document.getElementById('btnBasicNotification').addEventListener('click', testBasicNotification);
        document.getElementById('btnAgentLogin').addEventListener('click', testAgentLogin);
        document.getElementById('btnUrgentAlert').addEventListener('click', testUrgentAlert);

        window.addEventListener('DOMContentLoaded', () => {
            showResult('fileResult', '‚úÖ Native APIs Demo ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', 'success');
        });
    </script>
</body>
</html>
